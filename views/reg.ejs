<%- include ./partial/public_header%>
<form class="form-horizontal" method="post">
	<fieldset>
		<legend>用户注册</legend>
		
		<div class="form-group">
			<label for="username" class="col-sm-2 control-label">用户名</label>
			<div class="col-sm-10">
				<input class="form-control" type="text" id="username" name="username">
				<p class="help-block">你的账户名称，用于登录和显示</p>
			</div>
		</div>
		<div class="form-group">
			<label for="password" class="col-sm-2 control-label">密码</label>
			<div class="col-sm-10">
				<input type="password" id="password" class="form-control" name="password">
			</div>
		</div>
		<div class="form-group">
			<label for="password-repeat" class="col-sm-2 control-label">重复输入密码</label>
			<div class="col-sm-10">
				<input type="password" id="password-repeat" class="form-control" name="password-repeat">
			</div>
		</div>
		<div class="form-group">
			<div class="col-sm-10 col-sm-offset-2">
				<button type="submit" class="btn btn-primary">注册</button>
			</div>
		</div>
	</fieldset>
</form>
<script type="text/javascript">
	// 验证用户名和密码是否为空，以及密码输入是否一致
	// 验证用户名和密码是否为空
	$('form button[type=submit]').click(function(ev) {
		var username = $('#username').val();
		var password = $('#password').val();
		var psw_repeat = $('#password-repeat').val();
		var alert = $('div.alert-danger p');
		var alertMsg = '用户名或密码不能为空！';
		var alertHtml = '<div class="alert alert-danger alert-dismissible fade in" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><p></p></div>';

		if(username && password && psw_repeat && password === psw_repeat) {

			return true;
		} else {

			if(alert.length === 0) {
				$('#container').prepend(alertHtml);
				alert = $('div.alert-danger p');
			} 

			if(username && password) {
				alertMsg = psw_repeat ? '两次输入的密码不一致！' : '请再次输入密码！' ;
			} else {
				alertMsg = '用户名或密码不能为空！';
			}
			$(alert[0]).text(alertMsg);

			ev.preventDefault();
			return false;
		}
	});
</script>
<%- include ./partial/public_footer%>
